import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import "./QuizEnglish.css";

const QuizHindi = () => {
  const navigate = useNavigate();
  const [answers, setAnswers] = useState({});
  const [submitted, setSubmitted] = useState(false);
  const [showResults, setShowResults] = useState(false);
  const [name, setName] = useState("");

  const questions = [
    // Computer Questions
    {
      id: 1,
      question: "рдХрдВрдкреНрдпреВрдЯрд░ рдХреНрдпрд╛ рд╣реИ?",
      options: [
        "рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдлрд▓",
        "рдбреЗрдЯрд╛ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХ рдЙрдкрдХрд░рдг",
        "рдПрдХ рд╡рд╛рд╣рди",
        "рд░рд╕реЛрдИ рдХрд╛ рдЙрдкрдХрд░рдг",
      ],
      answer: 1,
      category: "Computer",
    },
    {
      id: 2,
      question: "рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдВ рд╕реЗ рдХреМрди рд╕рд╛ рдЗрдирдкреБрдЯ рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИ?",
      options: ["рдореЙрдирд┐рдЯрд░", "рдХреАрдмреЛрд░реНрдб", "рд╕реНрдкреАрдХрд░", "рдкреНрд░рд┐рдВрдЯрд░"],
      answer: 1,
      category: "Computer",
    },
    {
      id: 3,
      question: "CPU рдХрд╛ рдкреВрд░рд╛ рдирд╛рдо рдХреНрдпрд╛ рд╣реИ?",
      options: [
        "рд╕реЗрдВрдЯреНрд░рд▓ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдпреВрдирд┐рдЯ",
        "рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░реНрд╕рдирд▓ рдпреВрдирд┐рдЯ",
        "рд╕реЗрдВрдЯреНрд░рд▓ рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдпреВрдЯрд┐рд▓рд┐рдЯреА",
        "рдХрдВрдЯреНрд░реЛрд▓ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдпреВрдЯрд┐рд▓рд┐рдЯреА",
      ],
      answer: 0,
      category: "Computer",
    },
    {
      id: 4,
      question: "рдХреМрди рд╕рд╛ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдирд╣реАрдВ рд╣реИ?",
      options: ["Windows", "Linux", "Android", "Intel"],
      answer: 3,
      category: "Computer",
    },
    {
      id: 5,
      question: "WWW рдХрд╛ рдкреВрд░рд╛ рд░реВрдк рдХреНрдпрд╛ рд╣реИ?",
      options: [
        "рд╡рд░реНрд▓реНрдб рд╡реЗрдм рд╡рд┐рдВрдбреЛ",
        "рд╡рд░реНрд▓реНрдб рд╡рд╛рдЗрдб рд╡реЗрдм",
        "рд╡реЗрдм рд╡рд░реНрд▓реНрдб рд╡рд╛рдЗрдб",
        "рд╡рд╛рдЗрдб рд╡рд░реНрд▓реНрдб рд╡реЗрдм",
      ],
      answer: 1,
      category: "Computer",
    },
    {
      id: 6,
      question: "рдбреЗрдЯрд╛ рдХреЛ рд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
      options: ["RAM", "ROM", "рд╣рд╛рд░реНрдб рдбреНрд░рд╛рдЗрд╡", "рдХреИрд╢"],
      answer: 2,
      category: "Computer",
    },
    {
      id: 7,
      question: "URL рдХрд╛ рдорддрд▓рдм рдХреНрдпрд╛ рд╣реИ?",
      options: [
        "рдпреВрдирд┐рдлреЙрд░реНрдо рд░рд┐рд╕реЛрд░реНрд╕ рд▓реЛрдХреЗрдЯрд░",
        "рдпреВрдЬрд░ рд░рд┐рд╕реЛрд░реНрд╕ рд▓реЙрдЧрд┐рди",
        "рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рд░рд┐рд╕реЛрд░реНрд╕ рд▓рд┐рд╕реНрдЯ",
        "рдпреВрдирд┐рдлреЙрд░реНрдо рд░рдЬрд┐рд╕реНрдЯрд░реНрдб рд▓рд┐рдВрдХ",
      ],
      answer: 0,
      category: "Computer",
    },
    {
      id: 8,
      question: "рдбрд┐рд▓реАрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕реА рдХреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
      options: ["Shift", "Ctrl", "Del", "Tab"],
      answer: 2,
      category: "Computer",
    },
    {
      id: 9,
      question: "рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрд╛ рдХрд╛рд░реНрдп рдХреНрдпрд╛ рд╣реИ?",
      options: [
        "рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдирд╛",
        "рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рддрдХ рдкрд╣реБрдВрдЪрдирд╛",
        "рд╕рдВрдЧреАрдд рд╕реБрдирдирд╛",
        "рдЖрд░реЗрдЦ рдмрдирд╛рдирд╛",
      ],
      answer: 1,
      category: "Computer",
    },
    {
      id: 10,
      question: "рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдВ рд╕реЗ рдХреМрди рд╕рд╛ рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдирд╣реАрдВ рд╣реИ?",
      options: ["Chrome", "Firefox", "Google", "Safari"],
      answer: 2,
      category: "Computer",
    },
    // Mobile Questions
    {
      id: 11,
      question: "рдореЛрдмрд╛рдЗрд▓ рдлреЛрди рдХреЛ рдХреИрд╕реЗ рдСрди рдХрд░рддреЗ рд╣реИрдВ?",
      options: [
        "рд╡реЙрд▓реНрдпреВрдо рдмрдЯрди рджрдмрд╛рдПрдВ",
        "рдкрд╛рд╡рд░ рдмрдЯрди рдХреЛ рджрдмрд╛рдХрд░ рд░рдЦреЗрдВ",
        "рдлреЛрди рдХреЛ рд╣рд┐рд▓рд╛рдПрдВ",
        "рд╕реНрдХреНрд░реАрди рдХреЛ рдЫреБрдПрдВ",
      ],
      answer: 1,
      category: "Mobile",
    },
    {
      id: 12,
      question: "рдлреЛрди рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реЛрдЧрд╛?",
      options: [
        "рдХреИрдорд░рд╛ рдРрдк рдЦреЛрд▓реЗрдВ",
        "рдлреЛрди рдРрдк рдЦреЛрд▓реЗрдВ рдФрд░ рдирдВрдмрд░ рдбрд╛рдпрд▓ рдХрд░реЗрдВ",
        "рдЯреЗрдХреНрд╕реНрдЯ рдореИрд╕реЗрдЬ рднреЗрдЬреЗрдВ",
        "рд╡рд╛рдИ-рдлрд╛рдИ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ",
      ],
      answer: 1,
      category: "Mobile",
    },
    {
      id: 13,
      question: "рдЯреЗрдХреНрд╕реНрдЯ рдореИрд╕реЗрдЬ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕рд╛ рдРрдк рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
      options: ["рдХреИрдорд░рд╛", "рдХреИрд▓рдХреБрд▓реЗрдЯрд░", "рдореИрд╕реЗрдЬ", "рдЧреИрд▓рд░реА"],
      answer: 2,
      category: "Mobile",
    },
    {
      id: 14,
      question: "рдлреЛрдЯреЛ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕рд╛ рдРрдк рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
      options: ["рдореИрд╕реЗрдЬ", "рдХреИрдорд░рд╛", "рдХреИрд▓рдХреБрд▓реЗрдЯрд░", "рдлреЛрди"],
      answer: 1,
      category: "Mobile",
    },
    {
      id: 15,
      question: "рд╡рд╛рдИ-рдлрд╛рдИ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдХрд╣рд╛рдВ рдЬрд╛рддреЗ рд╣реИрдВ?",
      options: ["рдХреИрдорд░рд╛", "рдЧреИрд▓рд░реА", "рд╕реЗрдЯрд┐рдВрдЧреНрд╕", "рдореИрд╕реЗрдЬ"],
      answer: 2,
      category: "Mobile",
    },
    {
      id: 16,
      question: "рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рд╕рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
      options: [
        "рдлреЛрдЯреЛ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП",
        "рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП",
        "рдореИрд╕реЗрдЬрд┐рдВрдЧ рдФрд░ рдХреЙрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП",
        "рд╕рдВрдЧреАрдд рд╕реБрдирдиреЗ рдХреЗ рд▓рд┐рдП",
      ],
      answer: 2,
      category: "Mobile",
    },
    {
      id: 17,
      question: "рдЖрдк рдЕрдкрдиреА рд╕реЗрд╡ рдХреА рдЧрдИ рдлреЛрдЯреЛ рдХрд╣рд╛рдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ?",
      options: ["рдХреИрд▓рдХреБрд▓реЗрдЯрд░", "рдЧреИрд▓рд░реА", "рдореИрд╕реЗрдЬ", "рдлреЛрди"],
      answer: 1,
      category: "Mobile",
    },
    {
      id: 18,
      question: "рдЗрдирдХрдорд┐рдВрдЧ рдХреЙрд▓ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП?",
      options: [
        "рдкрд╛рд╡рд░ рдмрдЯрди рджрдмрд╛рдПрдВ",
        "рдЖрдВрд╕рд░ рдмрдЯрди рдХреЛ рд╕реНрд╡рд╛рдЗрдк рдпрд╛ рдЯреИрдк рдХрд░реЗрдВ",
        "рдХреИрдорд░рд╛ рдЦреЛрд▓реЗрдВ",
        "рдлреЛрди рдХреЛ рдмрдВрдж рдХрд░реЗрдВ",
      ],
      answer: 1,
      category: "Mobile",
    },
    {
      id: 19,
      question: "рдХреИрд▓рдХреБрд▓реЗрдЯрд░ рдРрдк рдХреНрдпрд╛ рдХрд░рддрд╛ рд╣реИ?",
      options: [
        "рдлреЛрдЯреЛ рд▓реЗрддрд╛ рд╣реИ",
        "рдореИрд╕реЗрдЬ рднреЗрдЬрддрд╛ рд╣реИ",
        "рдЧрдгрд┐рддреАрдп рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИ",
        "рдлреЛрди рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ",
      ],
      answer: 2,
      category: "Mobile",
    },
    {
      id: 20,
      question: "рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдкрд░ рдореИрд╕реЗрдЬ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП?",
      options: [
        "рдХреЗрд╡рд▓ рдРрдк рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛",
        "рдЗрдВрдЯрд░рдиреЗрдЯ рдХрдиреЗрдХреНрд╢рди рдФрд░ рд░рд┐рд╕реАрд╡рд░ рдХрд╛ рдирдВрдмрд░",
        "рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░",
        "рдПрдХ рд▓реИрдВрдбрд▓рд╛рдЗрди рдлреЛрди",
      ],
      answer: 1,
      category: "Mobile",
    },
  ];

  const handleChange = (questionId, optionIndex) => {
    setAnswers({ ...answers, [questionId]: optionIndex });
  };

  const calculateScore = () => {
    let correct = 0;
    questions.forEach((q) => {
      if (answers[q.id] === q.answer) {
        correct++;
      }
    });
    return correct;
  };

  const handleSubmit = (e) => {
    e.preventDefault();

    const allAnswered = questions.every((q) => answers[q.id] !== undefined);
    if (!allAnswered) {
      alert("рдХреГрдкрдпрд╛ рд╕рдмрдорд┐рдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рднреА рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдЙрддреНрддрд░ рджреЗрдВред");
      return;
    }

    setShowResults(true);
  };

  const handleFinalSubmit = () => {
    if (!name.trim()) {
      alert("рд╕рд░реНрдЯрд┐рдлрд┐рдХреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВред");
      return;
    }

    setSubmitted(true);
    setTimeout(() => {
      navigate("/courses/certificate-english", {
        state: { name },
      });
    }, 2000);
  };

  return (
    <div className="quiz-container">
      <h2>рдХрдВрдкреНрдпреВрдЯрд░ рдФрд░ рдореЛрдмрд╛рдЗрд▓ рдмреЗрд╕рд┐рдХреНрд╕ рдХреНрд╡рд┐рдЬ</h2>

      {!showResults ? (
        <>
          <form onSubmit={handleSubmit}>
            <div className="section-header">
              <h3>рдХрдВрдкреНрдпреВрдЯрд░ рдкреНрд░рд╢реНрди (1-10)</h3>
            </div>
            {questions.filter(q => q.category === "Computer").map((q) => (
              <div key={q.id} className="question-block">
                <p>
                  {q.id}. {q.question}
                </p>
                {q.options.map((option, index) => (
                  <label key={index}>
                    <input
                      type="radio"
                      name={`question-${q.id}`}
                      value={index}
                      onChange={() => handleChange(q.id, index)}
                      checked={answers[q.id] === index}
                    />
                    {option}
                  </label>
                ))}
              </div>
            ))}

            <div className="section-header">
              <h3>рдореЛрдмрд╛рдЗрд▓ рдкреНрд░рд╢реНрди (11-20)</h3>
            </div>
            {questions.filter(q => q.category === "Mobile").map((q) => (
              <div key={q.id} className="question-block">
                <p>
                  {q.id}. {q.question}
                </p>
                {q.options.map((option, index) => (
                  <label key={index}>
                    <input
                      type="radio"
                      name={`question-${q.id}`}
                      value={index}
                      onChange={() => handleChange(q.id, index)}
                      checked={answers[q.id] === index}
                    />
                    {option}
                  </label>
                ))}
              </div>
            ))}

            <button type="submit" className="submit-btn">
              рдкрд░рд┐рдгрд╛рдо рджреЗрдЦреЗрдВ
            </button>
          </form>
        </>
      ) : (
        <div className="results-section">
          <h3>рдХреНрд╡рд┐рдЬ рдкрд░рд┐рдгрд╛рдо</h3>
          <div className="score-display">
            <p className="score">рдЖрдкрдХрд╛ рд╕реНрдХреЛрд░: {calculateScore()} / {questions.length}</p>
            <p className="percentage">рдкреНрд░рддрд┐рд╢рдд: {Math.round((calculateScore() / questions.length) * 100)}%</p>
          </div>
          
          <div className="detailed-results">
            <h4>рд╡рд┐рд╕реНрддреГрдд рдкрд░рд┐рдгрд╛рдо:</h4>
            {questions.map((q) => (
              <div key={q.id} className={`result-item ${answers[q.id] === q.answer ? 'correct' : 'incorrect'}`}>
                <p><strong>рдкреНрд░{q.id}:</strong> {q.question}</p>
                <p><strong>рдЖрдкрдХрд╛ рдЙрддреНрддрд░:</strong> {q.options[answers[q.id]]}</p>
                <p><strong>рд╕рд╣реА рдЙрддреНрддрд░:</strong> {q.options[q.answer]}</p>
                <p className="result-status">
                  {answers[q.id] === q.answer ? 'тЬУ рд╕рд╣реА' : 'тЬЧ рдЧрд▓рдд'}
                </p>
              </div>
            ))}
          </div>

          <div className="name-entry-final">
            <div className="certificate-prompt">
              <h2>ЁЯОЙ рдмрдзрд╛рдИ рд╣реЛ! ЁЯОЙ</h2>
              <h3>рдЕрдкрдирд╛ рд╕рд░реНрдЯрд┐рдлрд┐рдХреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ:</h3>
            </div>
            <input
              type="text"
              className="name-input-highlight"
              placeholder="рдпрд╣рд╛рдВ рдЕрдкрдирд╛ рдкреВрд░рд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ"
              value={name}
              onChange={(e) => setName(e.target.value)}
            />
          </div>

          <div className="final-actions">
            <button onClick={() => setShowResults(false)} className="review-btn">
              рдЙрддреНрддрд░реЛрдВ рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХрд░реЗрдВ
            </button>
            <button onClick={handleFinalSubmit} className="submit-btn">
              рд╕рд░реНрдЯрд┐рдлрд┐рдХреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
            </button>
          </div>
        </div>
      )}

      {submitted && <p className="score">рдЖрдкрдХрд╛ рд╕рд░реНрдЯрд┐рдлрд┐рдХреЗрдЯ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...</p>}
    </div>
  );
};

export default QuizHindi;